<div class="bg-white p-8 border border-slate-200">
    <h3 class="text-2xl font-bold text-slate-900 mb-6">Envíanos un mensaje</h3>
    <form
        class="space-y-6"
        action="https://formsubmit.co/hello@codigo04.com"
        method="POST"
    >
        <div>
            <label
                for="name"
                class="block text-sm font-semibold text-slate-700 mb-1"
                >Nombre completo</label
            >
            <input
                type="text"
                id="name"
                name="Nombre"
                class="w-full px-4 py-3 bg-white border border-slate-300 text-slate-900 focus:border-blue-600 focus:ring-0 rounded-sm transition-colors outline-none"
                placeholder="Tu nombre"
            />
        </div>
        <div>
            <label
                for="email"
                class="block text-sm font-semibold text-slate-700 mb-1"
                >Correo electrónico *</label
            >
            <input
                type="email"
                id="email"
                name="email"
                class="w-full px-4 py-3 bg-white border border-slate-300 text-slate-900 focus:border-blue-600 focus:ring-0 rounded-sm transition-colors outline-none"
                placeholder="tucorreo@ejemplo.com"
                required
            />
        </div>
        <div>
            <label
                for="phone"
                class="block text-sm font-semibold text-slate-700 mb-1"
                >Teléfono</label
            >
            <input
                type="tel"
                id="phone"
                name="Teléfono"
                class="w-full px-4 py-3 bg-white border border-slate-300 text-slate-900 focus:border-blue-600 focus:ring-0 rounded-sm transition-colors outline-none"
                placeholder="123 456 789"
            />
        </div>
        <div>
            <label
                for="message"
                class="block text-sm font-semibold text-slate-700 mb-1"
                >Mensaje *</label
            >
            <textarea
                id="message"
                name="Mensaje"
                rows="5"
                maxlength="500"
                class="w-full px-4 py-3 bg-white border border-slate-300 text-slate-900 focus:border-blue-600 focus:ring-0 rounded-sm transition-colors outline-none"
                placeholder="¿En qué podemos ayudarte?"
                required></textarea>
        </div>
        <div>
            <label class="flex space-x-3 items-start">
                <input
                    id="privacy-check-contacto"
                    type="checkbox"
                    class="w-5 h-5 text-blue-600 bg-white border-slate-300 rounded-sm focus:ring-blue-500 mt-0.5"
                />
                <span class="text-slate-600 text-sm">
                    Acepto la
                    <a
                        href="/politica-de-privacidad"
                        class="text-blue-600 underline hover:text-blue-800"
                    >
                        política de privacidad</a
                    >
                    y el tratamiento de mis datos personales
                </span></label
            >
        </div>
        <input
            type="hidden"
            name="_subject"
            value="Nuevo mensaje de contacto - Navalpar V2"
        />
        <input type="hidden" name="_next" id="next-contacto" value="" />
        <button
            id="submit-contacto"
            type="submit"
            disabled
            class="w-full px-6 py-3 bg-blue-600 text-white font-bold rounded-sm hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
            >Enviar mensaje</button
        >
    </form>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const checkbox = document.getElementById(
            "privacy-check-contacto",
        ) as HTMLInputElement;
        const button = document.getElementById(
            "submit-contacto",
        ) as HTMLButtonElement;
        const nextInput = document.getElementById(
            "next-contacto",
        ) as HTMLInputElement;
        const nameInput = document.getElementById("name") as HTMLInputElement;
        const form = document.querySelector(
            "form[action*='formsubmit.co']",
        ) as HTMLFormElement;

        if (nextInput) {
            nextInput.value = `${window.location.origin}/mensaje-recibido`;
        }

        if (form) {
            form.addEventListener("submit", () => {
                if (nameInput) {
                    sessionStorage.setItem("form_user_name", nameInput.value);
                }
            });
        }

        function maybeEnableButton(): void {
            if (checkbox && button) {
                button.disabled = !checkbox.checked;
            }
        }

        if (checkbox) {
            checkbox.addEventListener("change", maybeEnableButton);
        }
    });
</script>
